<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="pengji"><meta name="description" content="一切奇淫巧技都是纸老虎"><link rel="alternative" href="/atom.xml" title="pengji的忘记列表" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>的一些jQuery兼容 - pengji的忘记列表</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">pengji的忘记列表</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-01-17T09:03:29.000Z">January 17, 2018</time><h1 class="post__title"><a href="/2018/01/17/ie8下的一些jQuery兼容/">的一些jQuery兼容</a></h1><div class="post__main echo"><ol>
<li><p>问题描述：在ie8+ 下ajax 取数据，无法获得返回数据。<br> debug到$.ajax之后，callback中 的代码未执行。度娘之后，发现在 $.ajax之前添加<br><code>jQuery.support.cors = true;</code> 即可</p>
<p> jQuery.support 是一组用于展示不同浏览器各自特性和bug的属性集合。</p>
<p> <img src="http://upload-images.jianshu.io/upload_images/3112405-e847eb39d603aa1d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="support参数"></p>
</li>
<li><p>问题描述：ie8 下  <code>Object.keys()</code> 使用报错。<br> <code>Object.keys</code>返回一个所有元素为字符串的数组，其元素来自于从给定的对象上面可直接枚举的属性。这些属性的顺序与手动遍历该对象属性时的一致。</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>];</span><br><span class="line">  alert(<span class="built_in">Object</span>.keys(arr)); <span class="comment">// 弹出"0,1,2"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 类数组对象</span></span><br><span class="line">  <span class="keyword">var</span> obj = &#123; <span class="number">0</span> : <span class="string">"a"</span>, <span class="number">1</span> : <span class="string">"b"</span>, <span class="number">2</span> : <span class="string">"c"</span>&#125;;</span><br><span class="line">  alert(<span class="built_in">Object</span>.keys(obj)); <span class="comment">// 弹出"0,1,2"</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// getFoo是个不可枚举的属性</span></span><br><span class="line">  <span class="keyword">var</span> my_obj = <span class="built_in">Object</span>.create(&#123;&#125;, &#123; <span class="attr">getFoo</span> : &#123; <span class="attr">value</span> : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.foo &#125; &#125; &#125;);</span><br><span class="line">  my_obj.foo = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  alert(<span class="built_in">Object</span>.keys(my_obj)); <span class="comment">// 只弹出foo</span></span><br><span class="line">  <span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">  [参考1](http://blog.csdn.net/wgl_china/article/details/51780649) 中提供了两种方式，但是我没有使用。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  我参考的是 [参考2](https://www.cnblogs.com/tinyTea/p/6069374.html) 这段代码</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">  <span class="keyword">var</span> DONT_ENUM = <span class="string">"propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor"</span>.split(<span class="string">","</span>),</span><br><span class="line">  hasOwn = (&#123;&#125;).hasOwnProperty;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> &#123;</span><br><span class="line">      toString: <span class="number">1</span></span><br><span class="line">  &#125;)&#123;</span><br><span class="line">      DONT_ENUM = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="built_in">Object</span>.keys = <span class="built_in">Object</span>.keys || <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;<span class="comment">//ecma262v5 15.2.3.14</span></span><br><span class="line">          <span class="keyword">var</span> result = [];</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj ) <span class="keyword">if</span>(hasOwn.call(obj,key))&#123;</span><br><span class="line">              result.push(key) ;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">if</span>(DONT_ENUM &amp;&amp; obj)&#123;</span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ;key = DONT_ENUM[i++]; )&#123;</span><br><span class="line">                  <span class="keyword">if</span>(hasOwn.call(obj,key))&#123;</span><br><span class="line">                      result.push(key);</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> result;</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>问题描述：ie8+ 下，使用 swiper 时，ie报错。<br>  debug之后，发现 swiper.min.js 中使用 a.trim() 来去掉多余空格，在使用 <code>$.trim(a)</code> 来代替原生trim。问题解决。</p>
</li>
</ol>
</div></header></article><div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC8zMzIzOS85Nzk2"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 pengji</div></footer><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?616842ce35fc8ecd6e2976272c7db95c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>